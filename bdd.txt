CREATE TABLE IF NOT EXISTS FamilleAliment (FamilleAlimentID INTEGER PRIMARY KEY, Nom CHAR(20) NOT NULL)
CREATE TABLE IF NOT EXISTS Unite( UniteID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(10) NOT NULL UNIQUE )
CREATE TABLE IF NOT EXISTS Categorie( CategorieID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(20) NOT NULL UNIQUE )
CREATE TABLE IF NOT EXISTS TypePlat( TypePlatID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(20) NOT NULL UNIQUE )
CREATE TABLE IF NOT EXISTS Recette( RecetteID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(40) NOT NULL, Duree INTEGER NOT NULL, NbPersonnes INTEGER NOT NULL, TypePlatID INTEGER NOT NULL CONSTRAINT fkTypePlat REFERENCES TypePlat(TypePlatID), CategorieID INTEGER NOT NULL CONSTRAINT fkCategorie REFERENCES Categorie(CategorieID),Preparation TEXT NOT NULL )
CREATE TABLE IF NOT EXISTS Ingredient(IngredientID INTEGER PRIMARY KEY AUTOINCREMENT,Nom CHAR(25) NOT NULL UNIQUE,FamilleAlimentID INTEGER CONSTRAINT fkFamilleAliment REFERENCES FamilleAliment(FamilleAlimentID),UniteID INTEGER CONSTRAINT fkUnite REFERENCES Unite(UniteID))
CREATE TABLE IF NOT EXISTS RecetteIngredient(RecetteID INTEGER NOT NULL CONSTRAINT fkRecette REFERENCES Recette(RecetteID),IngredientID INTEGER NOT NULL CONSTRAINT fkIngredient REFERENCES Ingredient(IngredientID),Quantite INTEGER NOT NULL,PRIMARY KEY (RecetteID, IngredientID))
CREATE TABLE IF NOT EXISTS ListeCourse (ListeCourseID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(25) NOT NULL UNIQUE )
CREATE TABLE IF NOT EXISTS ListeCourseIngredient( ListeCourseID INTEGER CONSTRAINT fkListeCourse REFERENCES ListeCourse(ListeCourseID), IngredientID INTEGER CONSTRAINT fkIngredient REFERENCES Ingredient(IngredientID), Quantite INTEGER NOT NULL, PRIMARY KEY (ListeCourseID, IngredientID) )
CREATE TABLE IF NOT EXISTS Menu(MenuID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(25) NOT NULL UNIQUE, Duree INTEGER NOT NULL)
CREATE TABLE IF NOT EXISTS MenuRecette(MenuID INTEGER CONSTRAINT fkListeCourse REFERENCES Menu(MenuID),Jour INTEGER NOT NULL, Heure INTEGER NOT NULL, RecetteID INTEGER CONSTRAINT fkRecette REFERENCES Recette(RecetteID), PRIMARY KEY (MenuID,Jour, Heure) )
CREATE TABLE IF NOT EXISTS Magasin(MagasinID INTEGER PRIMARY KEY AUTOINCREMENT, Nom CHAR(25) NOT NULL, adresse Varchar(100), longitude DOUBLE NOT NULL, latitude DOUBLE NOT NULL)
CREATE TABLE IF NOT EXISTS MagasinIngredient(MagasinID INTEGER CONSTRAINT fkMagasin REFERENCES Magasin(MagasinID),IngredientID INTEGER CONSTRAINT fkIngredient REFERENCES Ingredient(IngredientID), prix Float Not null, PRIMARY KEY (MagasinID, IngredientID) )
CREATE TABLE IF NOT EXISTS AdresseMail(AdresseMailID INTEGER PRIMARY KEY AUTOINCREMENT,Nom TEXT NOT NULL UNIQUE)
CREATE TABLE IF NOT EXISTS Utilisateur (UtilisateurID INTEGER PRIMARY KEY AUTOINCREMENT,Prenom CHAR(64),Nom CHAR(64),Pseudo CHAR(128) NOT NULL UNIQUE ,MotDePasse CHAR(64) NOT NULL,estProfessionnel BOOLEAN NOT NULL CHECK (estProfessionnel IN (0, 1)))
CREATE TABLE IF NOT EXISTS UtilisateurAdresse(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),Pays CHAR(64) NOT NULL,Ville CHAR(64) NOT NULL,CodePostal INTEGER NOT NULL, RueNom CHAR(64) NOT NULL, RueNumero INTEGER,PRIMARY KEY (UtilisateurID, Pays, Ville, CodePostal, RueNom, RueNumero))
CREATE TABLE IF NOT EXISTS UtilisateurMailFavoris(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),AdresseMailID fkAdresseMail REFERENCES AdresseMail(AdresseMailIDx),PRIMARY KEY (UtilisateurID, AdresseMailID))
CREATE TABLE IF NOT EXISTS UtilisateurMagasin(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),MagasinID fkMagasin REFERENCES Magasin(MagasinID),PRIMARY KEY (UtilisateurID, MagasinID))
CREATE TABLE IF NOT EXISTS UtilisateurMenu(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),MenuID fkMenu REFERENCES Menu(MenuID),PRIMARY KEY (UtilisateurID, MenuID))
CREATE TABLE IF NOT EXISTS UtilisateurListeCourse(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),ListeCourseID fkListeCourse REFERENCES ListeCourse(ListeCourseID),PRIMARY KEY (UtilisateurID, ListeCourseID))
CREATE TABLE IF NOT EXISTS UtilisateurRecette(UtilisateurID INTEGER CONSTRAINT fkUtilisateur REFERENCES Utilisateur(UtilisateurID),RecetteID fkRecette REFERENCES Recette(RecetteID),PRIMARY KEY (UtilisateurID, RecetteID))